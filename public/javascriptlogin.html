<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Test API POST</title>
    <script>
        function sendPostRequest() {
            const data = {
                uname: "reka12",
                psw: "reka123",
                remember: "on"
            };

            fetch('https://a96f4c0b-5254-44e5-8fcd-b3b54b294da6.mock.pstmn.io/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => response.json())
            .then(data => {
                console.log('Success:', data);
                alert('Login successful!');
                if (data.status === 'success') {
                    // Extract the token part (without 'Bearer ')
                    //const token = data.token.split(' ')[1]; // Split at space and get the second part
                     
                    // Store the token (you can use sessionStorage or localStorage to persist it)
                    //const token = data.token; 
                    //localStorage.setItem('authToken', token);
                   //console.log('Token stored:', localStorage.getItem('authToken')); // Verify it's being stored
                    
                     localStorage.setItem('authToken', 'rekatoken123'); // Manually set token
                     console.log(localStorage.getItem('authToken')); // Verify it is set
                     
                     setTimeout(function() {
                    // Redirect to the create users page after successful login
                    //window.location.href = 'createUsers.html';
                    window.location.replace('createUsers.html'); 
                }, 500);  // Delay of 500ms (adjust as needed)
                }
                else {
                    alert('Invalid login credentials!');
                }
            })
            .catch((error) => {
                console.error('Error:', error);
                alert('Error during login');
            });
        }
    </script>
</head>
<body>
    <button onclick="sendPostRequest()">Send POST Request</button>
</body>
</html>
